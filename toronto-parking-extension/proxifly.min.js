/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/proxifly@2.0.2/dist/index.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
!function(e,o){"function"==typeof define&&define.amd?define([],o):"object"==typeof module&&module.exports?module.exports=o():e.returnExports=o()}("undefined"!=typeof self?self:this,(function(){var e="[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)?"node":"browser";function o(o){this.options=o||{},this.options.environment=this.options.environment||e,this.options.apiKey=this.options.apiKey||"",this.options.debug=void 0!==this.options.debug&&this.options.debug,this.options.debug&&console.log("Proxifly options:",this.options),this._verifiedProxyList=[],this._verifiedProxyListTimes=[]}var t=function(e){var o;try{o=JSON.parse(e)}catch(t){o=e}return[o,e]};function r(e,o,r,s){var i="application/json";if(r._version="2.0.2",r._source="library",r._referrer=function(){try{return window.location.href}catch(e){return null}}(),"browser"===e.options.environment){var p=(o.protocol||"https://")+o.host+o.path;e.options.debug&&console.log("Browser request...",p);var u=new(window.XMLHttpRequest||XMLHttpRequest||ActiveXObject)("MSXML2.XMLHTTP.3.0");u.open(o.method,p,!0),u.setRequestHeader("Content-type",i),u.setRequestHeader("Accept",i),u.onreadystatechange=function(){var e;4===u.readyState&&(e=t(u.responseText),u.status>=200&&u.status<300?s({error:null,request:u,response:e[0]}):s({error:new Error(t(u.responseText)[0]||"There was an unknown error"),request:u}))},r=n(r),u.send(r)}else{var a={hostname:o.host,path:o.path,method:o.method,headers:{"Content-Type":i,Accept:i}};e.options.debug&&console.log("Node request...",a);var c=require("https"),f="",d=c.request(a,(function(e){e,e.on("data",(function(e){f+=e})),e.on("end",(function(){var o=t(f.toString())[0];e.statusCode>=200&&e.statusCode<300?s({error:null,request:d,response:o}):s({error:o||e.statusMessage||"Unknown error.",request:d})}))}));d.on("error",(function(e){s({error:e,request:d})})),r=n(r),d.write(r),d.end()}}function n(e){try{e=JSON.stringify(e)}catch(e){console.error("Could not stringify data.")}return e}if(o.prototype.getProxy=function(e){var o=this;(e=e||{}).config=e.config||{},e.format=(e.format||"json").toLowerCase(),e.apiKey=o.options.apiKey;var t={host:e.config.host||"api.proxifly.dev",path:e.config.path||"/get-proxy",protocol:e.config.protocol||"https://",method:"POST"};return new Promise((function(n,s){return r(o,t,e,(function(e){return e.error?s(e.error):n(e.response)}))}))},o.prototype.getPublicIp=function(e){var o=this;(e=e||{}).mode=(e.mode||"IPv4").toLowerCase(),e.method=(e.method||"POST").toUpperCase(),e.service=(e.service||"ifconfig").toLowerCase(),e.format=(e.format||"json").toLowerCase(),e.timeout=void 0!==e.timeout?e.timeout:6e4,e.apiKey=o.options.apiKey;var t={host:"",path:"",method:"GET",service:e.service};return"ipify"===t.service?(t.method="GET",t.host="ipv6"===e.mode?"api6.ipify.org":"api.ipify.org",t.path="json"===e.format?"/?format=json":"/"):"ifconfig"===t.service&&(t.method="GET",t.host="ifconfig.co",t.path="json"===e.format?"/json":"/ip"),new Promise((function(n,s){return setTimeout((function(){return s(new Error("The request timed out"))}),e.timeout),r(o,t,e,(function(o){return o.error?s(o.error):n(function(e,o){var t={};"json"===e.format?(t.ip=o.response.ip,t.geolocation={country:o.response.country_iso||o.response.country||"ZZ",city:o.response.city||"Unknown",region:o.response.region||o.response.state||"Unknown",zip:o.response.postal_code||o.response.postal||o.response.zip||o.response.zipcode||"Unknown",latitude:o.response.latitude||0,longitude:o.response.longitude||0}):t=o.response;return t}(e,o))}))}))},"browser"===e)try{window.Proxifly=o}catch(e){}return o}));
//# sourceMappingURL=/sm/3f78698da49d6c1ce773466a80d973c29fb77924e756d53913a9671e7266ca4e.map
